So $$a_j − a_i = j − i$$ can be represented equivalently as:  $$a_j - j = a_i - a_i$$.  So we can transform each number $$a_i$$ into $$a_i - i$$ and now the problem can be reduced to finding the number of equal values in such transformed array.  We do that simply by doing frequency counts and each value occurring $$x$$ times gives us $$\frac{x \cdot (x-1)}{2}$$ such pairs.
