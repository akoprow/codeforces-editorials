Let $$f(h)$$ be the number of cards needed for pyramid of height $$h$$.  Then we have: $$f(h+1) = f(h) + 2i + (i-1)$$.  So using DP we can precompute $$h$$ for values up to $$10^9$$ (turns out we need $$25820$$ values).  Then we just iterate from the heighest and greedily "construct" pyramids.
