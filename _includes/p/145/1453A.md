It's easy to observe that only trains with equal numbers can crash into each other and in that case cancelling one of them is enough.  So we can convert both train numbers to sets and the size of their intersection is our answer.
