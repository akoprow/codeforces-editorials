We solve it greedily by observing that it's best to give cheapest gifts to people later in the array.  To prove that let's say that we have two people $$k_i$$ and $$k_j$$ where $$j > i$$, and so $$k_j \ge k_i$$, who got gifts $$x$$ and $$y$$, respectively, with $$x \gt y$$ for a total cost of $$x + y$$.  Now let's swap those gifts so that $$k_i$$ gets $$y$$ (if it was ok to give him $$x$$ then it must also be ok to give him smaller $$y$$) and $$k_j$$ gets $$min(x, C_j)$$ (if it was OK to give $$x$$ to $$k_i$$ then it must be ok to give it to $$k_j$$ as $$k_j \ge k_i$$).  The total cost now becomes $$min(x, C_j) + y$$ which is less than or equal than what we had before.

Now it's just a matter of starting with giving money to everyone and then going from cheapest to more expensive gifts and handle them to people from right to left for as long as we can.
