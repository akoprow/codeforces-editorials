Let's re-root the tree at any leaf, let's call that $$R$$.  Let's say that we look at two other leaves $$L_1$$ and $$L_2$$ whose common ancestor is $$C$$.  We'll make a construction such that XOR on paths $$RC, CL_1, CL_2$$ are the same.

First let's think how to do it to use minimal number of values.  Let's look at lengths of paths from root to all the leaves.  If all the paths have the same parity then $$1$$ is the answer as all the paths will have even length and we can put the same number everywhere and it xor-ed with itself odd number of times will give $$0$$.  Otherwise $$3$$ is the answer as we can fill the paths with $$a$$, $$b$$ and $$a \oplus b$$, ensuring that each path has equal number of $$a$$s and $$b$$s and the final edge to the (non-root) leaf is $$a \oplus b$$.

As for the maximum for all non-leaf nodes we can use unique $$2^i$$ where $$i$$ is the id of the node, so that all nodes have unique numbers.  And then for the final edge to the leaf we put the xor of all the values from the root to the last node, ensuring that the path from the root will give $$0$$ when xor'ed.  In this way all the nodes will have unique values except for multiple leaves attached to the same interior node, which all will share the value.  It's fairly easy to find how many of them there are and hence what the maximum is.
