<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"">
  <meta name="generator" content="Jekyll">

  <title>Round 631 (Div I+II)</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/codeforces-editorials/css/main.css">

  <link href="/codeforces-editorials/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Round 631 (Div I+II) | Codeforces editorials</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Round 631 (Div I+II)" />
<meta name="author" content="Adam Koprowski" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Codeforces Round #631 (Div. 1) - Thanks, Denis aramis Shitov!" />
<meta property="og:description" content="Codeforces Round #631 (Div. 1) - Thanks, Denis aramis Shitov!" />
<meta property="og:site_name" content="Codeforces editorials" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-03T00:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Round 631 (Div I+II)" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"/codeforces-editorials/R-631","headline":"Round 631 (Div I+II)","dateModified":"2020-04-03T00:00:00+01:00","datePublished":"2020-04-03T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"/codeforces-editorials/R-631"},"author":{"@type":"Person","name":"Adam Koprowski"},"description":"Codeforces Round #631 (Div. 1) - Thanks, Denis aramis Shitov!","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
    extensions: [
      "MathMenu.js",
      "MathZoom.js",
      "AssistiveMML.js",
      "a11y/accessibility-menu.js"
    ],
    jax: ["input/TeX", "output/CommonHTML"],
    TeX: {
      extensions: [
        "AMSmath.js",
        "AMSsymbols.js",
        "noErrors.js",
        "noUndefined.js",
      ]
    }
  });
  </script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHM3SPE7F9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SHM3SPE7F9');
  </script>
</head>


<body>
  <div id="wrapper">
    <header>
  <div>
    <a href="/codeforces-editorials/">
    
    <h1>adam@home:~$</h1>
    </a>
    <div class="header-links">
      <a href="/codeforces-editorials/"><h2 class="header-link">Contests</h2></a>
<a href="/codeforces-editorials/problems"><h2 class="header-link">Problems</h2></a>
<a href="/codeforces-editorials/todo"><h2 class="header-link">TODO</h2></a>

    </div>
  </div>
</header>
    <div class="container">
      <section id="main_content">
        <article>
  <h2>Round 631 (Div I+II)</h2>
  <time datetime="2020-04-03T00:00:00+01:00" class="by-line">03 Apr 2020</time>
  <p><a href="https://codeforces.com/contest/1329">Codeforces Round #631 (Div. 1) - Thanks, Denis aramis Shitov!</a></p>

<p><a href="https://codeforces.com/contest/1330">Codeforces Round #631 (Div. 2) - Thanks, Denis aramis Shitov!</a></p>

<div class="alert alert-primary" role="alert">
  
  <tiny>1330</tiny>A

  
  <a href="/codeforces-editorials/problems/1330a/">
    Dreamoon and Ranking Collection
  </a>
  <a href="https://codeforces.com/contest/1330/problem/A">
  [CF]
  </a>

  <a href="https://github.com/akoprow/competetive-programming/blob/master/src/codeforces/r620-639/r631/1330a-dreamoon-and-ranking-collection.kt">(Code)</a>

  <rating>R:900 <meter min="800" max="3600" value="900" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">implementation</span>
  
  </labels>
</div>

<p>Fairly simple iteration; starting at \(1\) we go through positions, if currently considered position does not belong to \(a\) – i.e. we’ve never gotten this position in the contest so far – then we decrement \(x\) by one (we need one contest to get this position) and continue until \(x\) drops to \(0\).</p>

<div class="alert alert-primary" role="alert">
  
  <tiny>1330</tiny>B

  
  <a href="/codeforces-editorials/problems/1330b/">
    Dreamoon Likes Permutations
  </a>
  <a href="https://codeforces.com/contest/1330/problem/B">
  [CF]
  </a>

  <a href="https://github.com/akoprow/competetive-programming/blob/master/src/codeforces/r620-639/r631/1330b-dreamoon-likes-permutations.kt">(Code)</a>

  <rating>R:1400 <meter min="800" max="3600" value="1400" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">implementation</span>
  
    <span class="badge rounded-pill bg-warning text-dark">math</span>
  
  </labels>
</div>

<p>One direct option is to just do a sweep and keep track of left/right elements as multisets and with a little bit of extra bookkeeping we can in \(O(1)\) time see if those multisets are valid permutations, which is the case only if</p>

<ul>
  <li>there are no duplicates and</li>
  <li>\(max(M) = \mid M \mid\).</li>
</ul>

<p>But there’s a simpler solution.  If \(a\) can be recovered into two permutations \(p_1\) and \(p_2\) then \(max(a) = max(\mid p_1 \mid, \mid p_2 \mid)\), which leads to only two possible cases: \(\mid p_1 \mid = max(a)\) and \(\mid p_2 \mid = n - max(a)\), or vice versa.  We can easily check both options in linear time.</p>

<div class="alert alert-primary" role="alert">
  
  <tiny>1330</tiny>C

  
  <a href="/codeforces-editorials/problems/1330c/">
    Dreamoon Likes Coloring
  </a>
  <a href="https://codeforces.com/contest/1330/problem/C">
  [CF]
  </a>

  <a href="https://github.com/akoprow/competetive-programming/blob/master/src/codeforces/r620-639/r631/1330c-dreamoon-likes-coloring.kt">(Code)</a>

  <rating>R:1800 <meter min="800" max="3600" value="1800" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">constructive algorithms</span>
  
    <span class="badge rounded-pill bg-warning text-dark">greedy</span>
  
  </labels>
</div>

<p>Let’s think of boundary cases, i.e. given \(l_1, \ldots, l_m\) what’s the minimum and maximum \(n\) for which we are able to find a solution?</p>

<p>For maximum it’s clear that we just paint non-overlapping segments and so \(n_{max} = \sum_i l_i\).</p>

<p>For minimum we want to overlap them one by one but be careful because each segment must fit within the \(n\) slots, which leads to \(n_{min} = max_i \{ i + l_i \}\).</p>

<p>Now we can check if given \(n\) falls within those limits.  If it does not we simply answer \(-1\).</p>

<p>If it does we do a construction.  See that the minimal case maps to \(p_i = i\) and the maximal case maps to \(p_i = n - \sum_{j=i+1}^{m} l_j\).  Combining those two we arrive at:</p>

\[p_i = max(im, n - \sum_{j=i+1}^{m} l_j)\]

<p>which we can easily compute in constant time with help of prefix sums on \(l\).</p>

<div class="alert alert-primary" role="alert">
  
  <tiny>1330</tiny>D

  
  <a href="/codeforces-editorials/problems/1330d/">
    Dreamoon Likes Sequences
  </a>
  <a href="https://codeforces.com/contest/1330/problem/D">
  [CF]
  </a>

  <a href="https://github.com/akoprow/competetive-programming/blob/master/src/codeforces/r620-639/r631/1330d-dreamoon-likes-sequences.kt">(Code)</a>

  <rating>R:1700 <meter min="800" max="3600" value="1700" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">bitmasks</span>
  
    <span class="badge rounded-pill bg-warning text-dark">constructive algorithms</span>
  
    <span class="badge rounded-pill bg-warning text-dark">dp</span>
  
    <span class="badge rounded-pill bg-warning text-dark">math</span>
  
  </labels>
</div>

<p>Let’s denote by \(\mathcal{H}(x)\) the highest bit set in \(x\).</p>

<p>The crucial observation is that \(\mathcal{H}(a_1) &lt; \mathcal{H}(a_2) &lt; \ldots &lt; \mathcal{H}(a_n)\).  Why is that?  Firstly, if that condition is true then we can easily see that \(\mathcal{H}(b_i) = \mathcal{H}(a_i)\), which easily implies that \(b_1 &lt; \ldots &lt; b_n\), so that’s a sufficient condition.  Why is it also required?  Suppose otherwise.  Since \(a_i\) is increasing that means we must have \(\mathcal{H}(a_k) = \mathcal{H}(a_{k+1})\) for some \(k\).  We can show that then \(\mathcal{H}(b_k) = \mathcal{H}(a_k) = \mathcal{H}(a_{k+1})\).  Since \(b_{k+1} = a_{k+1} \oplus b_k\) we can see that the highest bit that was set in \(a_{k+1}\) and \(b_k\) will not be set in \(b_{k+1}\) and therefore \(\mathcal{H}(b_{k+1}) &lt; \mathcal{H}(b_k)\) and hence \(b_{k+1} &lt; b_k\); contradiction.</p>

<p>Once we know that we know that all numbers in a sequence must have different first bits set.  So what we do is we iterate over all bits in range \([1, 30]\), for each bit calculate how many different numbers with that bit set we can use by just taking the width of the range and being careful to cap the numbers at \(d\), so effectively considering the range:</p>

\[[2^i, min(2^{i+1}-1, d)]\]

<p>then we add one to that number (since for each bit we can either choose sum number in it or not choose anything with that bit set) and take a product across all bits (we can choose numbers there independently).  It only remains to subtract one from the final answer, since we counted an option of not taking anything in all of the bits but that’s not a valid option.</p>

<div class="alert alert-primary" role="alert">
  
  <tiny>1330</tiny>E

  
  <a href="/codeforces-editorials/problems/1330e/">
    Drazil Likes Heap
  </a>
  <a href="https://codeforces.com/contest/1330/problem/E">
  [CF]
  </a>

  

  <rating>R:2400 <meter min="800" max="3600" value="2400" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">data structures</span>
  
    <span class="badge rounded-pill bg-warning text-dark">greedy</span>
  
    <span class="badge rounded-pill bg-warning text-dark">implementation</span>
  
  </labels>
</div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TODO
</code></pre></div></div>

<div class="alert alert-primary" role="alert">
  
  <tiny>1329</tiny>D

  
  <a href="/codeforces-editorials/problems/1329d/">
    Dreamoon Likes Strings
  </a>
  <a href="https://codeforces.com/contest/1329/problem/D">
  [CF]
  </a>

  

  <rating>R:3100 <meter min="800" max="3600" value="3100" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">constructive algorithms</span>
  
    <span class="badge rounded-pill bg-warning text-dark">data structures</span>
  
  </labels>
</div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TODO
</code></pre></div></div>

<div class="alert alert-primary" role="alert">
  
  <tiny>1329</tiny>E

  
  <a href="/codeforces-editorials/problems/1329e/">
    Dreamoon Loves AA
  </a>
  <a href="https://codeforces.com/contest/1329/problem/E">
  [CF]
  </a>

  

  <rating>R:3300 <meter min="800" max="3600" value="3300" /></rating>

  <labels>
  
  
    <span class="badge rounded-pill bg-warning text-dark">binary search</span>
  
    <span class="badge rounded-pill bg-warning text-dark">greedy</span>
  
  </labels>
</div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TODO
</code></pre></div></div>

<hr />

<object data="notes/R-631.pdf" width="1000" height="1000" type="application/pdf" />


</article>
      </section>
    </div>
  </div>

   <footer>
  <a href="https://creativecommons.org/licenses/by-nc/3.0/deed.en_US">
    <span>
        <b>Adam Koprowski</b>
    </span>
    
    <span>© 2021</span>
  </a>
</footer>

  
</body>

</html>
